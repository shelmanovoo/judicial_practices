# judicial_practices
AI-ассистент для работы с судебными практиками в Neo4j

## Обзор системы

Это интеллектуальный чат-бот на базе n8n, который позволяет пользователям взаимодействовать с базой данных судебных практик Neo4j на естественном языке. Система автоматически преобразует пользовательские запросы в Cypher-запросы, выполняет их и возвращает структурированные ответы через Telegram.

<img width="1142" height="408" alt="image" src="https://github.com/user-attachments/assets/bf2e4024-3bab-413b-83cf-eed1a2cb15a9" />


## Архитектура workflow

### Компоненты системы:

**1. Chat Trigger (Входная точка)**
- Публичный веб-чат интерфейс
- Принимает сообщения пользователей
- Приветственное сообщение от имени инженера по ИИ

**2. Cypher Query Generator (AI-агент)**
- **Модель:** OpenRouter GPT-4.1-nano
- **Функция:** Преобразование естественного языка в Cypher-запросы
- **Экспертиза:** 
  - Знание структуры базы данных judicialpractices
  - Понимание меток: Case, LegalPrinciple, Participant, Object
  - Генерация оптимизированных запросов с LIMIT

**3. Neo4j Database Connector**
- **Endpoint:** `http://192.168.1.37:7474/db/judicialpractices/tx/commit`
- **Метод:** HTTP POST запросы
- **Аутентификация:** Basic Auth (neo4j credentials)
- **Формат:** JSON statements с Cypher queries
- **Лимит:** До 15 записей для предотвращения перегрузки

**4. Answer Generator (Юридический ассистент)**
- **Модель:** OpenRouter GPT-4.1-nano
- **Функция:** Анализ результатов запросов и формирование читаемых ответов
- **Задачи:**
  - Группировка дел по номерам
  - Выделение сути споров и результатов
  - Определение сторон конфликта
  - Анализ закономерностей
  - Форматирование для Telegram (без эмодзи)

**5. Telegram Sender**
- **Функция:** Отправка финального ответа пользователю
- Форматирование текста для удобного чтения

## Поток данных

```
Пользовательский запрос 
    ↓
AI преобразует в Cypher запрос
    ↓
Выполнение запроса в Neo4j
    ↓
AI анализирует результаты
    ↓
Отправка ответа в Telegram
```

## Примеры работы

**Запрос пользователя:**
> "Покажи 10 последних судебных дел"

**Сгенерированный Cypher:**
```cypher
MATCH (c:Case) RETURN c ORDER BY c.date DESC LIMIT 10
```

<img width="872" height="773" alt="image" src="https://github.com/user-attachments/assets/fb4da5c0-097f-4ee3-879b-1980dee2db35" />


**Ответ системы:**
Структурированный анализ дел с группировкой, описанием сути споров и результатов.

## Ключевые особенности

✅ **Естественный язык** - пользователи не знают Cypher  
✅ **Двухэтапный AI** - генерация запросов + анализ результатов  
✅ **Безопасность** - LIMIT предотвращает перегрузку  
✅ **Структурированность** - четкий формат ответов  
✅ **Telegram интеграция** - доступность через мессенджер  
✅ **Юридическая экспертиза** - специализированный промпт для правовых данных

## Технический стек

- **Оркестрация:** n8n
- **База данных:** Neo4j (judicialpractices)
- **AI модель:** OpenRouter GPT-4.1-nano
- **Мессенджер:** Telegram API
- **Протокол:** HTTP REST API
- **Язык запросов:** Cypher

## Безопасность

- Basic Authentication для Neo4j
- Ограничение результатов (LIMIT 15)
- Валидация JSON формата
- Приватный chat ID для отправки сообщений

Система представляет собой готовое решение для демократизации доступа к базе судебных практик, позволяя непрофессиональным пользователям эффективно работать с графовой базой данных через привычный интерфейс чата.
